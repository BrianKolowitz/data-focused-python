<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>05 - Getting Data from Web APIs - Data Focused Python</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-139655036-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-139655036-1'); </script> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>05 - Getting Data from Web APIs | Data Focused Python</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="05 - Getting Data from Web APIs" /> <meta property="og:locale" content="en_US" /> <link rel="canonical" href="http://localhost:4000/lectures/Week%2002%20-%20Processing%20files,%20Making%20Web%20Requests/05%20-%20Getting%20Data%20from%20Web%20APIs.html" /> <meta property="og:url" content="http://localhost:4000/lectures/Week%2002%20-%20Processing%20files,%20Making%20Web%20Requests/05%20-%20Getting%20Data%20from%20Web%20APIs.html" /> <meta property="og:site_name" content="Data Focused Python" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="05 - Getting Data from Web APIs" /> <script type="application/ld+json"> {"headline":"05 - Getting Data from Web APIs","url":"http://localhost:4000/lectures/Week%2002%20-%20Processing%20files,%20Making%20Web%20Requests/05%20-%20Getting%20Data%20from%20Web%20APIs.html","@type":"WebPage","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000/" class="site-title lh-tight"> Data Focused Python </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="http://localhost:4000/" class="nav-list-link">Data Focused Python</a></li><li class="nav-list-item"><a href="http://localhost:4000/assignments" class="nav-list-link">Assignments</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/lectures" class="nav-list-link">Lectures</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/lectures/Week%2001%20-%20Language%20basics,%20Generating%20Data,%20Storing%20Data.html" class="nav-list-link">Week 01 - Language basics, Generating Data, Storing Data</a><ul class="nav-list"><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2001%20-%20Language%20basics,%20Generating%20Data,%20Storing%20Data/00%20-%20Getting%20Started.html" class="nav-list-link">00 - Getting Started</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2001%20-%20Language%20basics,%20Generating%20Data,%20Storing%20Data/01.a%20-%20Terminal%20Application.html" class="nav-list-link">01.a - Terminal Application</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2001%20-%20Language%20basics,%20Generating%20Data,%20Storing%20Data/01.b%20-%20Argparse.html" class="nav-list-link">01.b - Argparse</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2001%20-%20Language%20basics,%20Generating%20Data,%20Storing%20Data/02.a%20-%20Generating%20Synthetic%20Healthcare%20Data.html" class="nav-list-link">02.a - Generating Synthetic Healthcare Data</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2001%20-%20Language%20basics,%20Generating%20Data,%20Storing%20Data/02.b%20-%20Generating%20Other%20Synthetic%20Data.html" class="nav-list-link">02.b - Generating Other Synthetic Data</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2001%20-%20Language%20basics,%20Generating%20Data,%20Storing%20Data/02.c%20-%20Using%20Synthea.html" class="nav-list-link">02.c - Using Synthea</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2001%20-%20Language%20basics,%20Generating%20Data,%20Storing%20Data/03%20-%20Getting%20Data%20from%20a%20Database.html" class="nav-list-link">03 - Getting Data from a Database</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2001%20-%20Language%20basics,%20Generating%20Data,%20Storing%20Data/04%20-%20FHIR%20SQL.html" class="nav-list-link">04 - FHIR SQL</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2001%20-%20Language%20basics,%20Generating%20Data,%20Storing%20Data/04%20-%20Python%20Testing.html" class="nav-list-link">04 - Python Testing</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2001%20-%20Language%20basics,%20Generating%20Data,%20Storing%20Data/05%20-%20Start%20a%20process%20in%20Python.html" class="nav-list-link">05 - Start a process in Python</a> </li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/lectures/Week%2002%20-%20Processing%20files,%20Making%20Web%20Requests.html" class="nav-list-link">Week 02 - Processing files, Making Web Requests</a><ul class="nav-list"><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2002%20-%20Processing%20files,%20Making%20Web%20Requests/01.a%20-%20File%20Processing.html" class="nav-list-link">01.a - File Processing</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2002%20-%20Processing%20files,%20Making%20Web%20Requests/01.b%20-%20CSV%20Files.html" class="nav-list-link">01.b - CSV Files</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2002%20-%20Processing%20files,%20Making%20Web%20Requests/01.c%20-%20JSON%20Files.html" class="nav-list-link">01.c - JSON Files</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2002%20-%20Processing%20files,%20Making%20Web%20Requests/01.d%20-%20XML%20Files.html" class="nav-list-link">01.d - XML Files</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2002%20-%20Processing%20files,%20Making%20Web%20Requests/02.a%20-%20Python%20Classes.html" class="nav-list-link">02.a - Python Classes</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2002%20-%20Processing%20files,%20Making%20Web%20Requests/02.b%20-%20Python%20Modules%20and%20Packages.html" class="nav-list-link">02.b - Python Modules and Packages</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2002%20-%20Processing%20files,%20Making%20Web%20Requests/03%20-%20Using%20fhirclient%20to%20parse%20Healthcare%20Data.html" class="nav-list-link">03 - Using fhirclient to parse Healthcare Data</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2002%20-%20Processing%20files,%20Making%20Web%20Requests/04%20-%20Reading%20synthea%20data.html" class="nav-list-link">04 - Reading synthea data</a> </li><li class="nav-list-item active"> <a href="http://localhost:4000/lectures/Week%2002%20-%20Processing%20files,%20Making%20Web%20Requests/05%20-%20Getting%20Data%20from%20Web%20APIs.html" class="nav-list-link active">05 - Getting Data from Web APIs</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/lectures/Week%2003%20-%20Functions,%20Loops,%20Comprehensions%20and%20Generators.html" class="nav-list-link">Week 03 - Functions, Loops, Comprehensions and Generators</a><ul class="nav-list"><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2003%20-%20Functions,%20Loops,%20Comprehensions%20and%20Generators/01.a%20-%20Python%20Functions.html" class="nav-list-link">01.a - Python Functions</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2003%20-%20Functions,%20Loops,%20Comprehensions%20and%20Generators/01.b%20-%20Python%20Tuples.html" class="nav-list-link">01.b - Python Tuples</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2003%20-%20Functions,%20Loops,%20Comprehensions%20and%20Generators/01.c%20-%20Loops.html" class="nav-list-link">01.c - Loops</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2003%20-%20Functions,%20Loops,%20Comprehensions%20and%20Generators/02%20-%20Lists%20and%20List%20Comprehensions.html" class="nav-list-link">02 - Lists and List Comprehensions</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2003%20-%20Functions,%20Loops,%20Comprehensions%20and%20Generators/03%20-%20Sets%20and%20Set%20Comprehensions.html" class="nav-list-link">03 - Sets and Set Comprehensions</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2003%20-%20Functions,%20Loops,%20Comprehensions%20and%20Generators/04.a%20-%20Dictionaries.html" class="nav-list-link">04.a - Dictionaries</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2003%20-%20Functions,%20Loops,%20Comprehensions%20and%20Generators/04.b%20-%20Dictionary%20Comprehensions.html" class="nav-list-link">04.b - Dictionary Comprehensions</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2003%20-%20Functions,%20Loops,%20Comprehensions%20and%20Generators/05%20-%20Python%20Generators.html" class="nav-list-link">05 - Python Generators</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/lectures/Week%2004%20-%20Data%20Processing%20and%20Visualization%20Part%201.html" class="nav-list-link">Week 04 - Data Processing and Visualization Part 1</a><ul class="nav-list"><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2004%20-%20Data%20Processing%20and%20Visualization%20Part%201/01.a%20-%20Cleaning%20and%20Transforming%20Data.html" class="nav-list-link">01.a - Cleaning and Transforming Data</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2004%20-%20Data%20Processing%20and%20Visualization%20Part%201/01.b%20-%20Grouping%20Data.html" class="nav-list-link">01.b - Grouping Data</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2004%20-%20Data%20Processing%20and%20Visualization%20Part%201/01.c%20-%20Descriptive%20Statistics.html" class="nav-list-link">01.c - Descriptive Statistics</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2004%20-%20Data%20Processing%20and%20Visualization%20Part%201/02%20-%20Basic%20Medical%20Data%20Visualization.html" class="nav-list-link">02 - Basic Medical Data Visualization</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2004%20-%20Data%20Processing%20and%20Visualization%20Part%201/03.a%20-%20NumPy%20Introduction.html" class="nav-list-link">03.a - NumPy Introduction</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2004%20-%20Data%20Processing%20and%20Visualization%20Part%201/03.b%20-%20NumPy%20Data%20analysis.html" class="nav-list-link">03.b - NumPy Data analysis</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/lectures/Week%2005%20-%20Data%20Processing%20and%20Visualization%20Part%202.html" class="nav-list-link">Week 05 - Data Processing and Visualization Part 2</a><ul class="nav-list"><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2005%20-%20Data%20Processing%20and%20Visualization%20Part%202/00%20-%20Additional%20Links.html" class="nav-list-link">00 - Additional Links</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2005%20-%20Data%20Processing%20and%20Visualization%20Part%202/01%20-%20Pandas%20Introduction.html" class="nav-list-link">01 - Pandas Introduction</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2005%20-%20Data%20Processing%20and%20Visualization%20Part%202/02.a%20-%20Pandas%20Data%20analysis%20Part%201.html" class="nav-list-link">02.a - Pandas Data analysis Part 1</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2005%20-%20Data%20Processing%20and%20Visualization%20Part%202/02.b%20-%20Pandas%20Data%20analysis%20Part%202.html" class="nav-list-link">02.b - Pandas Data analysis Part 2</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2005%20-%20Data%20Processing%20and%20Visualization%20Part%202/03%20-%20Matplotlib%20Tutorial%20Python%20Plotting.html" class="nav-list-link">03 - Matplotlib Tutorial Python Plotting</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2005%20-%20Data%20Processing%20and%20Visualization%20Part%202/04%20-%20The%20Ultimate%20Python%20Seaborn%20Tutorial.html" class="nav-list-link">04 - The Ultimate Python Seaborn Tutorial</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/lectures/Week%2006%20-%20Web%20Scraping.html" class="nav-list-link">Week 06 - Web Scraping</a><ul class="nav-list"><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2006%20-%20Web%20Scraping/01.%20Introduction%20to%20Web%20Scraping.html" class="nav-list-link">01. Introduction to Web Scraping</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2006%20-%20Web%20Scraping/02.%20CSS%20Selectors.html" class="nav-list-link">02. CSS Selectors</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2006%20-%20Web%20Scraping/03.a%20Web%20Scraping%20with%20Beautiful%20Soup.html" class="nav-list-link">03.a Web Scraping with Beautiful Soup</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2006%20-%20Web%20Scraping/03.b%20Web%20Scraping%20Using%20Selenium.html" class="nav-list-link">03.b Web Scraping Using Selenium</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2006%20-%20Web%20Scraping/03.c%20Web%20scraping%20with%20Scrapy.html" class="nav-list-link">03.c Web scraping with Scrapy</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2006%20-%20Web%20Scraping/04.a%20-%20More%20Web%20Scraping%20with%20BeautifulSoup.html" class="nav-list-link">04.a - More Web Scraping with BeautifulSoup</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/lectures/Week%2006%20-%20Web%20Scraping/04.b%20-%20Even%20More%20Web%20Scraping%20with%20BeautifulSoup.html" class="nav-list-link">04.b - Even More Web Scraping with BeautifulSoup</a> </li></ul></li></ul></li><li class="nav-list-item"><a href="http://localhost:4000/resources" class="nav-list-link">Resources</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Data Focused Python" aria-label="Search Data Focused Python" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//github.com/BrianKolowitz/data-focused-python" class="site-button" > Code </a> </li> <li class="aux-nav-list-item"> <a href="/data-focused-python/about.html" class="site-button" > About </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/lectures">Lectures</a></li> <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/lectures/Week%2002%20-%20Processing%20files,%20Making%20Web%20Requests.html">Week 02 - Processing files, Making Web Requests</a></li> <li class="breadcrumb-nav-list-item"><span>05 - Getting Data from Web APIs</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="python-api-tutorial---an-introduction-to-using-apis"> <a href="#python-api-tutorial---an-introduction-to-using-apis" class="anchor-heading" aria-labelledby="python-api-tutorial---an-introduction-to-using-apis"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Python API tutorial - An Introduction to using APIs </h1> <p><a href="https://www.dataquest.io/blog/python-api-tutorial/">source</a></p> <p>Application Program Interfaces, or APIs, are commonly used to retrieve data from remote websites. Sites like Reddit, Twitter, and Facebook all offer certain data through their APIs. To use an API, you make a request to a remote web server, and retrieve the data you need.</p> <p>But why use an API instead of a static dataset you can download? APIs are useful in the following cases:</p> <ul> <li>The data is changing quickly. An example of this is stock price data. It doesn’t really make sense to regenerate a dataset and download it every minute – this will take a lot of bandwidth, and be pretty slow.</li> <li>You want a small piece of a much larger set of data. Reddit comments are one example. What if you want to just pull your own comments on Reddit? It doesn’t make much sense to download the entire Reddit database, then filter just your own comments.</li> <li>There is repeated computation involved. Spotify has an API that can tell you the genre of a piece of music. You could theoretically create your own classifier, and use it to categorize music, but you’ll never have as much data as Spotify does.</li> </ul> <p>In cases like the ones above, an API is the right solution. In this blog post, we’ll be querying a simple API to retrieve data about the International Space Station (ISS). Using an API will save us time and effort over doing all the computation ourselves.</p> <p><img src="https://www.dataquest.io/wp-content/uploads/2015/09/iss056e201262.jpg" alt="ISS" /></p> <h2 id="api-requests"> <a href="#api-requests" class="anchor-heading" aria-labelledby="api-requests"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> API Requests </h2> <p>APIs are hosted on web servers. When you type www.google.com in your browser’s address bar, your computer is actually asking the www.google.com server for a webpage, which it then returns to your browser.</p> <p>APIs work much the same way, except instead of your web browser asking for a webpage, your program asks for data. This data is usually returned in JSON format (for more on this, checkout our tutorial on working with JSON data).</p> <p>In order to get the data, we make a request to a webserver. The server then replies with our data. In Python, we’ll use the <a href="http://www.python-requests.org/en/latest/">requests</a> library to do this. In this Python API tutorial we’ll be using Python 3.4 for all of our examples.</p> <h2 id="type-of-requests"> <a href="#type-of-requests" class="anchor-heading" aria-labelledby="type-of-requests"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Type of requests </h2> <p>There are many different types of requests. The most commonly used one, a GET request, is used to retrieve data.</p> <p>We can use a simple GET request to retrieve information from the OpenNotify API.</p> <p>OpenNotify has several API endpoints. An endpoint is a server route that is used to retrieve different data from the API. For example, the <code class="language-plaintext highlighter-rouge">/comments</code> endpoint on the Reddit API might retrieve information about comments, whereas the <code class="language-plaintext highlighter-rouge">/users</code> endpoint might retrieve data about users. To access them, you would add the endpoint to the base url of the API.</p> <p>The first endpoint we’ll look at on OpenNotify is the <code class="language-plaintext highlighter-rouge">iss-now.json</code> endpoint. This endpoint gets the current latitude and longitude of the International Space Station. As you can see, retrieving this data isn’t a great fit for a dataset, because it involves some calculation on the server, and changes quickly.</p> <p>You can see a listing of all the endpoints on OpenNotify <a href="http://open-notify.org/Open-Notify-API/">here</a>.</p> <p>The <em>base url</em> for the OpenNotify API is <code class="language-plaintext highlighter-rouge">http://api.open-notify.org</code>, so we’ll add this to the beginning of all of our endpoints.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># Make a get request to get the latest position of the international space station from the opennotify api.
</span><span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"http://api.open-notify.org/iss-now.json"</span><span class="p">)</span>

<span class="c1"># Print the status code of the response.
</span><span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">content</span><span class="p">)</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>200
b'{"message": "success", "iss_position": {"longitude": "1.1366", "latitude": "-46.3248"}, "timestamp": 1572553589}'
</code></pre></div></div> <h2 id="status-codes"> <a href="#status-codes" class="anchor-heading" aria-labelledby="status-codes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Status codes </h2> <p>The request we just made had a status code of <code class="language-plaintext highlighter-rouge">200</code>. Status codes are returned with every request that is made to a web server. Status codes indicate information about what happened with a request. Here are some codes that are relevant to GET requests:</p> <ul> <li><strong>200</strong> – everything went okay, and the result has been returned (if any)</li> <li><strong>301</strong> – the server is redirecting you to a different endpoint. This can happen when a company switches domain names, or an endpoint name is changed.</li> <li><strong>401</strong> – the server thinks you’re not authenticated. This happens when you don’t send the right credentials to access an API (we’ll talk about authentication in a later post).</li> <li><strong>400</strong> – the server thinks you made a bad request. This can happen when you don’t send along the right data, among other things.</li> <li><strong>403</strong> – the resource you’re trying to access is forbidden – you don’t have the right permissions to see it.</li> <li><strong>404</strong> – the resource you tried to access wasn’t found on the server.</li> </ul> <p>We’ll now make a GET request to <code class="language-plaintext highlighter-rouge">http://api.open-notify.org/iss-pass</code>, an endpoint that doesn’t exist, per the <a href="http://open-notify.org/Open-Notify-API/">API documentation</a>.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"http://api.open-notify.org/iss-pass"</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>404
</code></pre></div></div> <h2 id="hitting-the-right-endpoint"> <a href="#hitting-the-right-endpoint" class="anchor-heading" aria-labelledby="hitting-the-right-endpoint"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Hitting the right endpoint </h2> <p><code class="language-plaintext highlighter-rouge">iss-pass</code> wasn’t a valid endpoint, so we got a <code class="language-plaintext highlighter-rouge">404</code> status code in response. We forgot to add <code class="language-plaintext highlighter-rouge">.json</code> at the end, as the <a href="http://open-notify.org/Open-Notify-API/">API documentation</a> states.</p> <p>We’ll now make a <code class="language-plaintext highlighter-rouge">GET</code> request to <code class="language-plaintext highlighter-rouge">http://api.open-notify.org/iss-pass.json</code>.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"http://api.open-notify.org/iss-pass.json"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>400
</code></pre></div></div> <h2 id="query-parameters"> <a href="#query-parameters" class="anchor-heading" aria-labelledby="query-parameters"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Query parameters </h2> <p>You’ll see that in the last example, we got a <code class="language-plaintext highlighter-rouge">400</code> status code, which indicates a bad request. If you look at the documentation for the OpenNotify API, we see that the <a href="http://open-notify.org/Open-Notify-API/ISS-Pass-Times/">ISS Pass endpoint</a> requires two parameters.</p> <p>The ISS Pass endpoint returns when the ISS will next pass over a given location on earth. In order to compute this, we need to pass the coordinates of the location to the API. We do this by passing two parameters – latitude and longitude.</p> <p>We can do this by adding an optional keyword argument, <code class="language-plaintext highlighter-rouge">params</code>, to our request. In this case, there are two parameters we need to pass:</p> <ul> <li><strong>lat</strong> – The latitude of the location we want.</li> <li><strong>lon</strong> – The longitude of the location we want.</li> </ul> <p>We can make a dictionary with these parameters, and then pass them into the <code class="language-plaintext highlighter-rouge">requests.get</code> function.</p> <p>We can also do the same thing directly by adding the query parameters to the url, like this: <code class="language-plaintext highlighter-rouge">http://api.open-notify.org/iss-pass.json?lat=40.71&amp;lon=-74</code>.</p> <p>It’s almost always preferable to setup the parameters as a dictionary, because <code class="language-plaintext highlighter-rouge">requests</code> takes care of some things that come up, like properly formatting the query parameters.</p> <p>We’ll make a request using the coordinates of New York City, and see what response we get.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Set up the parameters we want to pass to the API.
# This is the latitude and longitude of New York City.
</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span><span class="s">"lat"</span><span class="p">:</span> <span class="mf">40.71</span><span class="p">,</span> <span class="s">"lon"</span><span class="p">:</span> <span class="o">-</span><span class="mi">74</span><span class="p">}</span>

<span class="c1"># Make a get request with the parameters.
</span><span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"http://api.open-notify.org/iss-pass.json"</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">parameters</span><span class="p">)</span>
<span class="c1"># response = requests.get("http://api.open-notify.org/iss-pass.json?lat={0}&amp;lon={1}".format(parameters['lat'], parameters['lon']))
</span>
<span class="c1"># Print the content of the response (the data the server returned)
</span><span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>

<span class="c1"># This gets the same data as the command above
# response = requests.get("http://api.open-notify.org/iss-pass.json?lat=40.71&amp;lon=-74")
# print(response.content)
</span></code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{'message': 'success', 'request': {'altitude': 100, 'datetime': 1572551178, 'latitude': 40.71, 'longitude': -74.0, 'passes': 5}, 'response': [{'duration': 504, 'risetime': 1572588456}, {'duration': 655, 'risetime': 1572594154}, {'duration': 606, 'risetime': 1572600003}, {'duration': 559, 'risetime': 1572605889}, {'duration': 613, 'risetime': 1572611722}]}
</code></pre></div></div> <h2 id="working-with-json-data"> <a href="#working-with-json-data" class="anchor-heading" aria-labelledby="working-with-json-data"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Working with JSON data </h2> <p>You may have noticed that the content of the response earlier was a <code class="language-plaintext highlighter-rouge">string</code>. Although it was shown as a <strong>bytes</strong> object, we can easily convert the content to a string using <code class="language-plaintext highlighter-rouge">response.content.decode("utf-8")</code>.</p> <p>Strings are the way that we pass information back and forth to APIs, but it’s hard to get the information we want out of them. How do we know how to decode the string that we get back and work with it in Python? How do we figure out the <code class="language-plaintext highlighter-rouge">altitude</code> of the ISS from the string response?</p> <p>Luckily, there’s a format called <a href="http://json.org">JavaScript Object Notation (JSON)</a>. JSON is a way to encode data structures like lists and dictionaries to strings that ensures that they are easily readable by machines. JSON is the primary format in which data is passed back and forth to APIs, and most API servers will send their responses in JSON format.</p> <p>Python has great JSON support, with the <code class="language-plaintext highlighter-rouge">json</code> package. The <code class="language-plaintext highlighter-rouge">json</code> package is part of the standard library, so we don’t have to install anything to use it. We can both convert lists and dictionaries to JSON, and convert strings to lists and dictionaries. In the case of our ISS Pass data, it is a dictionary encoded to a string in JSON format.</p> <p>The json library has two main methods:</p> <ul> <li><strong>dumps</strong> – Takes in a Python object, and converts it to a string.</li> <li><strong>loads</strong> – Takes a JSON string, and converts it to a Python object.</li> </ul> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Make a list of fast food chains.
</span><span class="n">best_food_chains</span> <span class="o">=</span> <span class="p">[</span><span class="s">"Taco Bell"</span><span class="p">,</span> <span class="s">"Shake Shack"</span><span class="p">,</span> <span class="s">"Chipotle"</span><span class="p">]</span>

<span class="c1"># This is a list.
</span><span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">best_food_chains</span><span class="p">))</span> 
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'list'&gt;
</code></pre></div></div> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Import the json library
</span><span class="kn">import</span> <span class="nn">json</span>
</code></pre></div></div> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Use json.dumps to convert best_food_chains to a string.
</span><span class="n">best_food_chains_string</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">best_food_chains</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'***'</span><span class="p">,</span> <span class="n">best_food_chains_string</span><span class="p">)</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>*** ["Taco Bell", "Shake Shack", "Chipotle"]
</code></pre></div></div> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># We've successfully converted our list to a string.
</span><span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">best_food_chains_string</span><span class="p">))</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'str'&gt;
</code></pre></div></div> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Convert best_food_chains_string back into a list
</span><span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">best_food_chains_string</span><span class="p">)))</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'list'&gt;
</code></pre></div></div> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Make a dictionary
</span><span class="n">fast_food_franchise</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Subway"</span><span class="p">:</span> <span class="mi">24722</span><span class="p">,</span>
    <span class="s">"McDonalds"</span><span class="p">:</span> <span class="mi">14098</span><span class="p">,</span>
    <span class="s">"Starbucks"</span><span class="p">:</span> <span class="mi">10821</span><span class="p">,</span>
    <span class="s">"Pizza Hut"</span><span class="p">:</span> <span class="mi">7600</span>
<span class="p">}</span>
</code></pre></div></div> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># We can also dump a dictionary to a string and load it.
</span><span class="n">fast_food_franchise_string</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">fast_food_franchise</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">fast_food_franchise_string</span><span class="p">))</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'str'&gt;
</code></pre></div></div> <h2 id="getting-json-from-an-api-request"> <a href="#getting-json-from-an-api-request" class="anchor-heading" aria-labelledby="getting-json-from-an-api-request"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Getting JSON from an API request </h2> <p>You can get the content of a response as a python object by using the <code class="language-plaintext highlighter-rouge">.json()</code> method on the response.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Make the same request we did earlier, but with the coordinates of San Francisco instead.
</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span><span class="s">"lat"</span><span class="p">:</span> <span class="mf">37.78</span><span class="p">,</span> <span class="s">"lon"</span><span class="p">:</span> <span class="o">-</span><span class="mf">122.41</span><span class="p">}</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"http://api.open-notify.org/iss-pass.json"</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">parameters</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">content</span><span class="p">))</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'bytes'&gt;
</code></pre></div></div> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Get the response data as a python object.  Verify that it's a dictionary.
</span><span class="n">data</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'message is '</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="s">'message'</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s">'altitude is '</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="s">'request'</span><span class="p">][</span><span class="s">'altitude'</span><span class="p">])</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'dict'&gt;
{'message': 'success', 'request': {'altitude': 100, 'datetime': 1572553593, 'latitude': 37.78, 'longitude': -122.41, 'passes': 5}, 'response': [{'duration': 529, 'risetime': 1572599536}, {'duration': 654, 'risetime': 1572605252}, {'duration': 567, 'risetime': 1572611131}, {'duration': 487, 'risetime': 1572617049}, {'duration': 567, 'risetime': 1572622888}]}
message is  success
altitude is  100
</code></pre></div></div> <h2 id="content-type"> <a href="#content-type" class="anchor-heading" aria-labelledby="content-type"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Content type </h2> <p>The server doesn’t just send a status code and the data when it generates a response. It also sends metadata containing information on how the data was generated and how to decode it. This is stored in the response headers. In Python, we can access this with the <code class="language-plaintext highlighter-rouge">headers</code> property of a response object.</p> <p>The headers will be shown as a dictionary. Within the headers, <code class="language-plaintext highlighter-rouge">content-type</code> is the most important key for now. It tells us the format of the response, and how to decode it. For the OpenNotify API, the format is JSON, which is why we could decode it with the <code class="language-plaintext highlighter-rouge">json</code> package earlier.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Headers is a dictionary
</span><span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">headers</span><span class="p">)</span>

<span class="c1"># Get the content-type from the dictionary.
</span><span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">headers</span><span class="p">[</span><span class="s">"content-type"</span><span class="p">])</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{'Server': 'nginx/1.10.3', 'Date': 'Thu, 31 Oct 2019 20:26:33 GMT', 'Content-Type': 'application/json', 'Content-Length': '521', 'Connection': 'keep-alive', 'Via': '1.1 vegur'}
application/json
</code></pre></div></div> <h2 id="finding-the-number-of-people-in-space"> <a href="#finding-the-number-of-people-in-space" class="anchor-heading" aria-labelledby="finding-the-number-of-people-in-space"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Finding the number of people in space </h2> <p>OpenNotify has one more API endpoint, <code class="language-plaintext highlighter-rouge">astros.json</code>. It tells you how many people are currently in space. The format of the responses can be found <a href="http://open-notify.org/Open-Notify-API/People-In-Space/">here</a>.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Get the response from the API endpoint.
</span><span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"http://api.open-notify.org/astros.json"</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">()</span>
</code></pre></div></div> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># people are currently in space.
</span><span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">"number"</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>6
{'people': [{'name': 'Christina Koch', 'craft': 'ISS'}, {'name': 'Alexander Skvortsov', 'craft': 'ISS'}, {'name': 'Luca Parmitano', 'craft': 'ISS'}, {'name': 'Andrew Morgan', 'craft': 'ISS'}, {'name': 'Oleg Skripochka', 'craft': 'ISS'}, {'name': 'Jessica Meir', 'craft': 'ISS'}], 'number': 6, 'message': 'success'}
</code></pre></div></div> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
</code></pre></div></div> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
